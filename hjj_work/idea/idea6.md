# 战斗系统相关设定和系统

## 血量系统

血量是两段
0-50%是重伤，50%-100%是正常血量（轻伤）
轻伤阶段
轻伤血量会恢复
获得 10%的攻击、攻速、闪避、表层精力恢复速度，移动速度奖励

重伤阶段
血量会不断流失
获得-50%的攻击、攻速、闪避、表层精力恢复速度，移动速度惩罚
获得 30%的精准、暴击率、暴击伤害奖励
恢复物品对轻伤重伤的回血效率不一样

## 精力系统

精力是有两层的
表层是随便用随便回的，深层是只能休息回复的
表层精力最多只能回复到深层精力的比例上限
默认在休息时正常恢复表层精力和深层精力，
不处于休息时以 50%的速度恢复表层精力，不恢复深层精力
战斗工作时都不恢复

每消耗一定量的表层精力，深层精力就会扣一定数值

表层精力 0-25%是极度疲劳，25-50%是疲劳，50-100%是正常
疲劳时对全战斗属性都有 20%降低
极度疲劳时对全战斗属性 60%降低
深层精力通过限制表层精力来约束玩家行为

当表层精力的比例超过了 100%，就获得精力充沛效果，全属性 20%提升
有两个方向可以达到这个效果
比较廉价的是消耗品，直接加到表层精力上，那自然能超过 100%了
甚至在深层精力不足的时候都能强行顶起表层精力
不过这种情况下，表层精力用了就没了
比较耐用的是提高深层精力的 buff
深层精力变成了原本的 100%以上，那么表层精力自然也能恢复到 100%以上
而且在这种时候，只要额外的深层精力还没用完，表层精力每次都能恢复到 100%以上
可以多次享受到精力充沛

## 魔力系统

在一二三章节没有特殊设计，就只是一种会恢复的资源
少量的主动技能消耗魔力施展，稀少的技能可以提供魔力
主要的魔力提升途径是获得武器装备的器魂，吃掉之后可以提供一些

在第四章，城主给了玩家特殊功法之后，修炼这个就可以提高魔力的等级
此时魔力引入等级这个参数
等级就相当于魔力的质量，虽然不改变魔力的上限，但是原本的魔力会更耐用，而且施展的技能效果会更好

魔力等级也可以作为修炼某些技能的门槛，上限不足就不给加经验

魔力等级高了，原本的魔力恢复数值会打折扣，所以高级魔力恢复技能也开始出现了

魔力等级提高的具体实现方法
魔力等级提高的技能书会写明，这个技能可以对 n 点魔力提升等级，最高提升到 m 级
假如玩家有 100 魔力，技能允许提供 40 点 2 级魔力，那么练完之后，玩家就拥有了 60 点 1 级魔力，40 点 2 级魔力
恢复时从低级魔力开始恢复，使用时？？高低先用好像都有说法，
要是战斗规划系统能设置的很细致的话，就允许玩家自己选吧，默认也先用低级魔力

## 战斗伤害设定

游戏基本战斗方式分为近战远程魔法，三种方式细分成 3 种伤害
近战主要针对近距离敌人，一般基于玩家的力量属性，使用武器直接攻击敌人，主要对敌人造成“近战伤害”
远程主要针对远距离敌人，基于玩家的敏捷属性，远程武器需要消耗物品（比如箭矢）然后才能攻击，主要对敌人造成“远程伤害”
魔法主要针对中距离敌人，基于玩家的智力属性，魔法武器需要消耗玩家的魔力才能攻击，主要对敌人造成魔法伤害

造成的伤害类型主要基于当次攻击使用的技能
然后额外附加上武器的特殊效果

比如普普通通的近战远程魔法武器，都能使用“近距离挥舞”技能，
这个“近距离挥舞”技能的效果就是造成近战伤害，于是使用三种武器就都只造成了近战伤害
假如有个远程武器，它有被动，可以让攻击额外附加远程伤害，那同样进行了近距离挥舞之后，造成的就是
技能提供的近战伤害+武器提供的远程伤害，两段伤害

武器只提供属性，最终造成伤害的还是技能
而技能有各种使用前提，基本上能造成近战伤害的技能，就只允许手里使用的是近战类型的武器

伤害除了大分类为近战远程魔法以外，还带有属性，属性由武器提供
锋利属性，打击属性，未来可能的金木水火土属性，什么毒属性燃烧属性之类的

近战伤害有个小分类，锐器伤害和钝器伤害，这是由武器提供的，都归属于近战伤害
比如使用剑，它属于锐器，就有一个被动“让攻击变为锋利属性”，然后使用了“近距离挥舞”技能之后，近战伤害获得了锋利属性上

远程武器也类似，由于远程伤害相关的技能一般有两个条件，使用某种远程武器（比如弓），消耗弹药（比如箭矢）
其中就有两个变量，远程武器的锐钝，弹药的锐钝，
这里最终也由技能来决定，一般远程技能设定为，基于弹药的属性来改变最终的属性
“近距离挥舞”技能，不需要消耗弹药，效果是造成近战伤害，那远程武器（比如弓）的锐钝属性就能正常生效
“弓箭射击”技能，需要消耗弹药，效果是造成远程伤害，那就基于弹药的锐钝属性来改变最终的属性，弓的属性就不生效了

对于武器的被动提供的额外伤害，也应该定义好属性，最好不要出现无属性的伤害

## 武器合成设定

在第二章开放村内村外设施之后，在铁匠铺进行
武器品质分白绿蓝紫红，普通，优质，稀有，史诗，传说
第二章的各种副本一般掉落白绿，极少情况掉蓝
村里的铁匠铺允许一样的多个白合成到绿，不改装备性质，只增幅一些属性参数
或者类似主动技能的设计，同种武器设计好最强形态，低品质就是锁了一些词条
因为是第一个铁匠铺，只允许合成到绿，第三章到城镇里的铁匠铺可以合成到蓝
再往后设计个什么牛逼匠人允许合成到紫
学习铁匠技能自己打造不能超过师傅的水平

制式武器最多只能合成到紫，
特制武器虽然能合成到红，但是设定红色传说级别的武器同世只有一把
历史上因为有传说，所以多半还在世界上，所以玩家能打造合成的也是紫色，
只有在某些事件或者副本里，才能遇到传说级别的武器，之后直接给或者被破坏允许玩家合成都可以

设定 10 把低级武器合成一个高品质武器，在另一个灵魂方面的 npc 处可以用 10 把史诗武器或者 1 把传说武器消耗掉，变成器魂
这样制式武器和特制武器都用传说级的消耗获得了器魂
拥有器魂相当于点亮了对应武器的图鉴，可以获得灵魂属性的奖励，
也可以无条件使用这把武器，相当于不占背包了
通过这种方式可以把武器装备带到幽冥地域去，毕竟都是灵魂

## 武器装备类别设定

武器分为近战远程魔法
近战武器
锐器
匕首，剑，斧头，长枪
钝器
空手或者拳套，棍棒，大锤，鞭子
全部近战武器就这么 8 种就好

匕首和拳套是极近距离武器，攻速最快，攻击较低，有较高暴击率
剑和棍棒是普通近距离武器，攻速攻击暴击全部普通
斧头和大锤是普通近距离武器，攻速最慢，攻击最高，暴击率最低
长枪和鞭子是群攻武器，在近距离里能打到最远的距离，攻击普通，攻速慢，暴击率低

匕首，剑，棍棒，鞭子是单手武器，可以同时使用副手装备

长枪，大锤，拳套，斧头是双手武器，副手会被占据

远程武器
双手共持，弓
攻速正常，暴击率正常，伤害正常
使用箭矢，弹药比较廉价

双手共持，弩炮
攻速最慢，暴击率最低，伤害最高
使用弩箭，弹药比较贵

单手，手弩
攻速较慢，暴击率较高，伤害较低
允许放在副手位置，使用弩箭

双手共持，喷枪
攻速最快，暴击率较低，伤害最低
属于 dot 攻击，使用一份弹药之后持续攻击几秒

单手，投掷
攻速正常，暴击率 0，伤害最低
使用消耗品，属于是垃圾桶类型了

单手，回旋镖
可以堆叠，单个攻速很慢，但是可以随着拥有的数量加快攻速
攻速较慢，暴击率较高，伤害正常
不消耗弹药，这种远程武器一般造价高昂

弹药的类别就随便定义了，基本上是全都有
箭矢可以有锋利和打击，弩箭也可以有锋利和打击

总共 6 个类型

魔法
施法核心（可以随意使用，基本相当于普通的武器）
法杖，魔法书，水晶，名字无所谓

阵法核心（也是一种武器，开始战斗之后数值逐渐增加，一定时间内加到最大）

扩散核心（额外消耗更多的魔力，更慢的施法速度，让法术变成大范围 aoe）

法术核心（相当于魔法版本的弓，施展魔法时要消耗物品，而魔力消耗会比较少）

召唤核心（魔力消耗比较少，设定是用魔力操控手里的这个特殊的魔力武器，借由这个武器去造成伤害，
那么相关的技能就是近战伤害类型的）

总共 5 个类型

## 武器增幅设定

武器上有最低使用属性限制，设定是武器有重量，或者使用有门槛，达不到的人连拿起都费力，或者用不懂
玩家低于这个限制时，不允许使用
武器还有最大使用属性限制，设定是武器本身不够坚硬，强行使用会破坏武器，所以主角会收着力使用
玩家属性高于这个限制时，会强行压到这个属性来战斗

在战斗中，只讨论武器的数值计算，基本上是玩家数值+武器装备数值=最终属性，用这个最终属性投入技能中，技能算出效果，打到敌人
对于近战，武器装备数值就是手上的武器的数值

对于远程，武器装备数值是远程武器面板+弹药面板的数值，打算武器占 6 弹药占 4，
所以单独来看，远程武器的面板会低于近战武器，不过低级远程武器允许搭载高级弹药，
在同一个地图里，玩家属性一致的情况下，远程的最大伤害会略高于近战
（武器是同一个等级的，远程可以不用常规最强弹药，而是用更稀有，更难获得的更高级弹药）
后期解锁投掷，允许空手施展远程，就是直接使用弹药
空手投掷时，远程武器面板就是 0，只加弹药面板
空手丢弹药基本上是不如使用同级别远程武器的，只是给究极后期玩家做一个保底的远程攻击手段

对于魔法，武器装备数值是魔法武器面板\*魔法武器倍率
倍率一般都在 100%左右，只针对几种属性，其他属性就很低
空手施法时，魔法武器面板为 0，魔法武器倍率为 100%，没有使用属性限制
单独来看，魔法武器的面板也会因为倍率而低于同级别近战武器
前期玩家只能用各种魔法武器，自身属性+武器属性乘以武器的倍率之后，再输入到技能里，放出魔法技能
中期魔法技能解放，允许空手施展魔法
这时，有些流派的技能可能是空手施展比较好，某流派用专门的魔法武器伤害比较高，没有好武器的话，玩家空手也能施展
后期因为魔法武器的使用数值限制，跟不上玩家的武器都淘汰了，许多情况下就是空手施展魔法技能，
只有一些神器，数值足够高，才能承载玩家的属性，同时仅仅释放出 110%的倍率就足够强，比空手释放强就行了
只要用“使用数值”来控制，后期的武器倍率不会越来越膨胀，因为玩家没有其他选择

## 死亡设定

主要是给死亡多加个剧情设定
平时自动存档，在旅行出门时存了之后旅行过程中就不存了

死亡之后进入“幽冥地域”，可以设定一个神什么的，巴拉巴拉介绍你是很特别的人
然后允许你返回
选择自动存档复活就是说“带着前世记忆复活，这一世我要赢回所有”

幽冥地域也是一个安全区，也可以旅行出去找事，可以获得技能可以练级
但是获得的物品不能带回阳间，主要是可以练一些在阳间比较难练的技能
感觉就像是一个针对灵魂层次的练功房

未来还可以加入物资共享的机制，让地府真的变成一块新地图（DLC）

## 玩家攻击的设定

玩家的战斗是通过“主动技能”来进行的
玩家身上有主动技能槽，然后往里面放入主动技能，
开始战斗之后，时间运行，遍历每个槽位，激活槽位里的主动技能，技能产生各种效果
遍历完毕之后，一回合结束，再反复遍历，实现自动的长久的战斗

细节设定：

玩家开始只有 3 个槽，后面逐渐解锁，最多拥有 9 个槽

遍历一个槽需要的时间是攻速，

一个主动技能可能会占据多个槽
比如表示轻攻击的主动技能只占据一个槽，那么玩家一开始就可以塞三个轻攻击，一回合打 3 次
表示重攻击的主动技能占 2 个槽，那开局 3 槽就只能放一个重攻击，另一个空着的槽就放不进第二个了
虽然一个动作占据了两个槽，但是并不一定就纯削弱，而是可以绑定两个动作在里面
比如两个槽的前一个是攻击，后一个叫攻击后摇
使用远程武器时，前一个是拉弓，后一个是攻击，
如果想削弱某个主动技能，那么给要求这个技能占据更多的槽，或者绑定的动作里加没用的占位动作，就能削弱
如果想设计某一流派的一连串招式，那么就给相关的技能要求占据很多槽，然后里面每个位置都和对应流派相关

主动技能有各种各样的限制条件，
简单的限制，比如必须手持近战武器，比如需要用蓝，
更高级的限制，比如需要在血量高于一定数值时，比如必须放在第一个槽位里
如果不满足条件，时间走到这个槽里的时候就什么都不做，相当于空着了

技能和技能之间的连携
除了依靠两个技能的效果，由玩家主动组合在一起发挥更大的作用以外
两个技能之间还允许写明条件，当某某技能在主动技能槽时获得加强
这种方式也能充当流派设计的一部分
